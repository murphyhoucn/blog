

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202505301726222.png">
  <link rel="icon" href="https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202505301728148.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Murphy">
  <meta name="keywords" content="Murphy,CosmicDusty,murphy,cosmicdusty,cn">
  
    <meta name="description" content="记录一下在做科研的过程中，遇到的一些小知识点。之前都Github的每个项目Repo下面记录着，但是太零散了，现在都搬过来。">
<meta property="og:type" content="article">
<meta property="og:title" content="小知识">
<meta property="og:url" content="https://blog.cosmicdusty.cc/post/Knowledge/ResearchTips/index.html">
<meta property="og:site_name" content="CosmicDusty-Blog">
<meta property="og:description" content="记录一下在做科研的过程中，遇到的一些小知识点。之前都Github的每个项目Repo下面记录着，但是太零散了，现在都搬过来。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202506011358984.jpg">
<meta property="article:published_time" content="2025-06-01T03:57:08.000Z">
<meta property="article:modified_time" content="2025-06-01T06:02:02.994Z">
<meta property="article:author" content="Murphy">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="DeepLearning">
<meta property="article:tag" content="PyTorch">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Git">
<meta property="article:tag" content="Github">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202506011358984.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>小知识 - CosmicDusty-Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blog.cosmicdusty.cc","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"https://murhyimgur.oss-cn-beijing.aliyuncs.com/website/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"16d93d5abbd7ea15ec53daed5459ebf7","google":null,"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"JijHNKemeVNog4wF7g9I5TR3","app_key":"FvsKdxHOP2aG5rHrHby5aV0b","server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"gtag":null,"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?16d93d5abbd7ea15ec53daed5459ebf7";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>CosmicDusty</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202506011358984.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="小知识"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Murphy
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-06-01 11:57" pubdate>
          2025年6月1日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          12k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          96 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">小知识</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Contents"><a href="#Contents" class="headerlink" title="Contents"></a>Contents</h1><ul>
<li>Linux</li>
<li>VSCode</li>
<li>Git and Github</li>
<li>Conda</li>
<li>Python Dev</li>
</ul>
<h1 id="TMP"><a href="#TMP" class="headerlink" title="TMP"></a>TMP</h1><h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">nohup</span> bash auto.sh &gt; ./nohub_log/auto_file_name.log 2&gt;&amp;1 &amp;<br></code></pre></td></tr></table></figure>

<p>为了规范化，这里的log的名字就用所运行的对应的.sh文件名字+时间吧。获取当前时间用如下的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(sr_benchmark) houjinliang@3090server:~/MyCVProject/eSuperResolution/SR_Benchmark$ <span class="hljs-built_in">date</span> <span class="hljs-string">&quot;+%Y_%m_%d__%H_%M_%S&quot;</span><br>2024_10_03__10_50_16<br></code></pre></td></tr></table></figure>

<blockquote>
<p>如果你想在关闭终端后继续运行bash脚本，你可以使用nohup命令或者将脚本作为作业提交到后台。</p>
</blockquote>
<ul>
<li><p>使用 <code>nohup</code> 命令：<code>nohup</code> 命令用于在退出账户或关闭终端后继续运行指定的命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">nohup</span> bash auto.sh &amp;<br><span class="hljs-comment"># 这将会在后台运行你的脚本，并且即使你关闭了终端，脚本也会继续运行。所有标准输出和错误输出将被重定向到一个名为 nohup.out 的文件中，除非你指定了其他的输出文件。</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>记录日志: 如果你想记录输出日志，并确保即使关闭终端也能记录，那么结合 nohup 和重定向输出到日志文件是个好方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">nohup</span> bash auto.sh &gt; mylog.log 2&gt;&amp;1 &amp;<br><span class="hljs-comment"># 这里，所有标准输出和错误输出都会被重定向到 mylog.log 文件中。</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>&amp;</code> 符号: 你也可以直接在命令后加一个 <code>&amp;</code> 符号，将脚本放到后台运行：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash auto.sh &amp;<br><span class="hljs-comment"># 然而，这种方法在你关闭终端时不会保护你的进程，除非你同时使用了 nohup。</span><br></code></pre></td></tr></table></figure>

<ul>
<li>使用 <code>disown</code>: 如果你已经运行了脚本并希望将其移到后台而不受终端关闭的影响，可以使用 <code>disown</code> 命令：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 首先运行脚本：</span><br>bash auto.sh<br><br><span class="hljs-comment"># 2. 然后按下 Ctrl + Z 来停止脚本。</span><br><br><span class="hljs-comment"># 3. 使用 bg 命令将脚本放入后台：</span><br><span class="hljs-built_in">bg</span><br><br><span class="hljs-comment"># 4. 最后，使用 disown 命令从作业列表中移除该作业：</span><br><span class="hljs-built_in">disown</span><br><br><span class="hljs-comment"># 这样即使关闭终端，脚本也会继续在后台运行。</span><br></code></pre></td></tr></table></figure>

<h2 id="两台服务器之间传文件"><a href="#两台服务器之间传文件" class="headerlink" title="两台服务器之间传文件"></a>两台服务器之间传文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) houjinliang@3090server:~/MyCVProject/eSuperResolution/exp_datasets$ scp -r -P xxxx ./datasets_pet_se8/ houjinliang@10.69.xx.xx:/mnt/houjinliang/MyCVProject/eSuperResolution/exp_datasets<br>The authenticity of host <span class="hljs-string">&#x27;[10.69.xx.xx]:xxxx ([10.69.xx.xx]:xxxx)&#x27;</span> can<span class="hljs-string">&#x27;t be established.</span><br><span class="hljs-string">ECDSA key fingerprint is SHA256:xxxx.</span><br><span class="hljs-string">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="hljs-string">Warning: Permanently added &#x27;</span>[10.69.xx.xx]:xxxx<span class="hljs-string">&#x27; (ECDSA) to the list of known hosts.</span><br><span class="hljs-string">houjinliang@10.69.xx.xx&#x27;</span>s password:<br></code></pre></td></tr></table></figure>

<h2 id="nvitop-kill-function"><a href="#nvitop-kill-function" class="headerlink" title="nvitop kill function"></a>nvitop kill function</h2><p>在nvitop的界面中，选择进程按k能直接把程序kill了，按k的时候会有三个选项，这三个选项的意思如下（来着ChatGLM）：</p>
<p>kill 是Linux和类Unix操作系统中用于发送信号到程序的一个命令。您提到的 sigterm、sigkill 和 sigint 是可以发送给进程的信号的名称，下面是这些信号的含义：</p>
<ul>
<li><p><strong>SIGTERM（信号编号15）</strong>：这是一个标准的程序终止信号。当你发送 SIGTERM 到一个进程时，你是在请求该进程终止。大多数进程在接收到此信号时会进行清理操作，然后退出。但是，进程可以捕获这个信号并决定如何处理它，甚至可以忽略它。</p>
</li>
<li><p><strong>SIGKILL（信号编号9）</strong>：这是一个强制终止信号的信号，不能被进程捕获或忽略。当你发送 SIGKILL 到一个进程时，操作系统会无条件终止该进程。SIGKILL 通常用于结束那些不再响应 SIGTERM 信号的顽固进程。</p>
</li>
<li><p><strong>SIGINT（信号编号2）</strong>：当用户在终端中按下中断键（通常是Ctrl+C）时，shell会发送 SIGINT 到前台进程。这是一个告诉程序中断其当前操作的请求。进程可以选择捕获这个信号并执行特定的清理操作，或者默认情况下，它会由操作系统终止。使用 kill 命令发送这些信号的基本格式如下：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> -SIGTERM [进程ID]<br><span class="hljs-built_in">kill</span> -SIGKILL [进程ID]<br><span class="hljs-built_in">kill</span> -SIGINT [进程ID]<br><span class="hljs-comment"># 通常，可以使用信号编号代替信号名称：</span><br><br><span class="hljs-built_in">kill</span> -15 [进程ID]  <span class="hljs-comment"># 等同于 SIGTERM</span><br><span class="hljs-built_in">kill</span> -9 [进程ID]   <span class="hljs-comment"># 等同于 SIGKILL</span><br><span class="hljs-built_in">kill</span> -2 [进程ID]   <span class="hljs-comment"># 等同于 SIGINT</span><br><span class="hljs-comment"># 在操作系统中管理进程时，通常首先尝试使用 SIGTERM 来优雅地结束进程，如果进程没有响应，再考虑使用 SIGKILL。SIGINT 则多用于交互式环境中，比如终端。</span><br></code></pre></td></tr></table></figure>


<h2 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h2><ul>
<li><code>kill PID</code>: 终止进程：默认情况下，kill命令发送SIGTERM（信号15），这可以请求进程终止。如果进程没有捕获这个信号，它将被终止。</li>
<li><code>kill -9 PID</code>: (强制kill)发送 SIGKILL（信号9）将立即结束进程，不能被忽略或捕获。</li>
<li><code>kill -9 -PID</code>: 杀死进程组：使用 -9 选项可以杀死整个进程组。</li>
</ul>
<h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><ul>
<li><code>ps -u</code>： 这个命令会列出当前登录用户的进程，并以用户友好的格式显示。它通常会显示进程的用户名、进程ID（PID）、CPU使用时间和命令名。-u选项告诉ps命令按照用户过滤进程信息，如果不指定用户名，则默认显示当前用户的进程。</li>
<li><code>ps -f</code>： 这个命令会以完整的格式显示当前所有进程的信息。-f选项代表“full format”，它提供了更多的信息，如进程的父进程ID（PPID）、启动时间、运行时间、控制终端（TTY）等。如果不与-u选项结合使用，它将显示系统上所有进程的详细信息。</li>
<li><code>ps -f -u</code>(<strong>这个最好用</strong>)： 这个命令与ps -f类似，但是它会过滤出当前登录用户的进程信息，并且以完整格式显示。如果单独使用-u而不指定用户名，它默认会显示当前用户的进程。</li>
<li><code>ps -f -u username</code>： 这个命令会以完整格式显示指定用户username的所有进程。这里username是你要查询的用户的用户名。这个命令对于系统管理员来说非常有用，因为它允许他们查看特定用户的进程，了解用户可能正在运行哪些程序，以及这些程序消耗的系统资源。</li>
</ul>
<p><code>ps -f -u username</code> 是在类Unix系统中使用的一个命令，用于查看特定用户（username）的进程信息。下面是对该命令各部分的解释：</p>
<ul>
<li><code>ps</code>：这是process status的缩写，是用于显示当前系统进程状态的工具。</li>
<li><code>-f</code>：这是ps命令的一个选项，代表“full format”，它会以完整格式的列表显示进程信息。这通常会包括用户、PID（进程ID）、PPID（父进程ID）、C（CPU使用率）、STIME（开始时间）、TTY（终端）、TIME（运行时间）和CMD（命令）等字段。</li>
<li><code>-u username</code>：这个选项告诉ps命令只显示属于指定用户username的进程。在这里，username是你要查询的用户的用户名。</li>
</ul>
<p>所以，当你执行 <code>ps -f -u username</code> 命令时，你会得到一个列表，显示所有属于用户username的进程及其详细信息。这是一个用于进程管理和监控的有用命令，可以帮助系统管理员或用户了解特定用户运行了哪些进程，以及这些进程的状态和资源使用情况。</p>
<h2 id="Tmux"><a href="#Tmux" class="headerlink" title="Tmux"></a>Tmux</h2><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.hpc.sjtu.edu.cn/login/tmux.html">tmux|上海交大超算平台用户手册 Documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux 使用教程|阮一峰的网络日志</a></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. 新建会话<br>tmux new -s SESSION_NAME<br><br>2. 分离会话（在会话中，使用分离会话，退出到终端中）(快捷键：Ctrl+b d (先按下Ctrl+b，然后松手，再按下d))<br>tmux detach<br><br>3. 接入会话<br>tmux attach -t SESSION_NAME<br><br>4. 杀死会话<br>tmux kill-session -t SESSION_NAME<br><br>5. 切换会话 (快捷键： Ctrl+b s)<br>tmux switch -t SESSION_NAME<br><br>6. 重命名会话<br>tmux rename-session -t 0 SESSION_NAME<br></code></pre></td></tr></table></figure>

<p>AUTO_ALL_SR.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>current_time=$(<span class="hljs-built_in">date</span> <span class="hljs-string">&quot;+%Y_%m_%d__%H_%M_%S&quot;</span>)<br><br>Sessionname=<span class="hljs-string">&quot;<span class="hljs-variable">$current_time</span>-SR2&quot;</span><br><span class="hljs-comment"># tmux new -s &quot;$Sessionname&quot; -d &#x27;bash AUTO_log.sh 2&#x27;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Established Tmux Session: <span class="hljs-variable">$Sessionname</span>&quot;</span><br><span class="hljs-built_in">sleep</span> 3<br><br>Sessionname=<span class="hljs-string">&quot;<span class="hljs-variable">$current_time</span>-SR4&quot;</span><br><span class="hljs-comment"># tmux new -s &quot;$Sessionname&quot; -d &#x27;bash AUTO_log.sh 4&#x27;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Established Tmux Session: <span class="hljs-variable">$Sessionname</span>&quot;</span><br><span class="hljs-built_in">sleep</span> 3<br><br>Sessionname=<span class="hljs-string">&quot;<span class="hljs-variable">$current_time</span>-SR8&quot;</span><br><span class="hljs-comment"># tmux new -s &quot;$Sessionname&quot; -d &#x27;bash AUTO_log.sh 8&#x27;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Established Tmux Session: <span class="hljs-variable">$Sessionname</span>&quot;</span><br><span class="hljs-built_in">sleep</span> 3<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; &quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;List all Tmux Session:&quot;</span><br>tmux <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure>

<h2 id="Symbolic-link"><a href="#Symbolic-link" class="headerlink" title="Symbolic link"></a>Symbolic link</h2><p>符号链接（英语：Symbolic link），又称软链接，是一类特殊的文件， 其包含有一条以绝对路径或者相对路径的形式指向其它文件或者目录的引用。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45761493/article/details/120829768">https://blog.csdn.net/qq_45761493/article/details/120829768</a><br>Linux创建软连接一定要用绝对路径</p>
</blockquote>
<h2 id="备份服务器上的文件夹"><a href="#备份服务器上的文件夹" class="headerlink" title="备份服务器上的文件夹"></a>备份服务器上的文件夹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 3090本地备份</span><br><span class="hljs-built_in">cd</span> ~<br>rsync -av --exclude=<span class="hljs-string">&#x27;*.mat&#x27;</span> --exclude=<span class="hljs-string">&#x27;checkpoints/*&#x27;</span> ./MyCVProject/eSuperResolution/SR_Benchmark/ ./MyBackup/SR_Benchmark_Backup3090_241020/<br><span class="hljs-comment"># 3090远程备份到3080</span><br>rsync -av --exclude=<span class="hljs-string">&#x27;*.mat&#x27;</span> --exclude=<span class="hljs-string">&#x27;checkpoints/*&#x27;</span> -e <span class="hljs-string">&#x27;ssh -p xxxx&#x27;</span> ./MyCVProject/eSuperResolution/SR_Benchmark/ houjinliang@10.xx.xx.xx:./MyBackup/SR_Benchmark_Backup3090_241020/<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 3080本地备份</span><br><span class="hljs-built_in">cd</span> ~<br>rsync -av --exclude=<span class="hljs-string">&#x27;*.mat&#x27;</span> --exclude=<span class="hljs-string">&#x27;checkpoints/*&#x27;</span> ./MyCVProject/eSuperResolution/SR_Benchmark/ ./MyBackup/SR_Benchmark_Backup3080_241020/<br><span class="hljs-comment"># 3080远程备份到3090</span><br>rsync -av --exclude=<span class="hljs-string">&#x27;*.mat&#x27;</span> --exclude=<span class="hljs-string">&#x27;checkpoints/*&#x27;</span> -e <span class="hljs-string">&#x27;ssh -p xxxx&#x27;</span> ./MyCVProject/eSuperResolution/SR_Benchmark/ houjinliang@10.xx.xx.xx:./MyBackup/SR_Benchmark_Backup3080_241020/<br></code></pre></td></tr></table></figure>

<h2 id="前台任务转后台"><a href="#前台任务转后台" class="headerlink" title="前台任务转后台"></a>前台任务转后台</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sayyy/article/details/126191261">linux：将进程切换到后台且不退出|CSDN</a></p>
</blockquote>
<ol>
<li>将进程暂停，然后放在后台（Ctrl + Z）</li>
<li>使用<code>jobs -l</code>，查看后台的进程，可以看到ID和“Stopped”的状态，以及当前的所执行的命令是什么</li>
<li>可以将进程切换到前台且继续执行：<code>fg [id]</code> &#x2F; 也可以让进程在后台继续执行：<code>bg [id]</code></li>
<li><code>jobs -l</code>，查看后台的进程，可以看到ID和“Running”的状态，如果是后台执行的话，在命令后面将多一个”&amp;”符号</li>
<li>通过<code>exit</code>命令退出当前shell。执行exit退出shell后，进程不退出。</li>
<li>再打开另一个shell，使用ps -ef|grep [xxx]可查看到在后台运行的进程。这里”xxx”指的是之前运行的命令是什么，比如scp, wget, python等。</li>
</ol>
<h1 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h1><h2 id="vpdb"><a href="#vpdb" class="headerlink" title="vpdb"></a>vpdb</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># install</span><br>pip install vpdb<br><span class="hljs-comment"># use</span><br>vpdb python main_Apricity.py --ae_title GAE --running_mode train --running_phase ae<br></code></pre></td></tr></table></figure>

<h2 id="VSCode-查找正则表达式"><a href="#VSCode-查找正则表达式" class="headerlink" title="VSCode 查找正则表达式"></a>VSCode 查找正则表达式</h2><p><code>\[[^\]]*\] </code><br>查找左右括号及其里面的内容</p>
<p>用在</p>
<ul>
<li>log&#x2F;A_wandb_sync_errors.log（复制upload上次失败的命令）</li>
<li>utils&#x2F;manually_wandb_upload.sh（粘贴到这里，用正则表达式删去没有的）</li>
</ul>
<h1 id="Git-and-Github"><a href="#Git-and-Github" class="headerlink" title="Git and Github"></a>Git and Github</h1><h2 id="git-push-error"><a href="#git-push-error" class="headerlink" title="git push error!"></a>git push error!</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 设置代理</span><br>(base) PS D:\Document\DevelopProject\Develop_DeepLearning\HSI\HSI-FSC&gt; git config --global http.proxy http://127.0.0.1:7890<br>(base) PS D:\Document\DevelopProject\Develop_DeepLearning\HSI\HSI-FSC&gt; git config --global https.proxy http://127.0.0.1:7890<br><span class="hljs-comment"># 查看代理</span><br>(base) PS D:\Document\DevelopProject\Develop_DeepLearning\HSI\HSI-FSC&gt; git config --global https.proxy<br>http://127.0.0.1:7890<br>(base) PS D:\Document\DevelopProject\Develop_DeepLearning\HSI\HSI-FSC&gt; git config --global http.proxy<br>http://127.0.0.1:7890<br><span class="hljs-comment"># 取消代理</span><br>git config --global --<span class="hljs-built_in">unset</span> http.proxy <br>git config --global --<span class="hljs-built_in">unset</span> https.proxy<br></code></pre></td></tr></table></figure>
<h2 id="Github-repository-瘦身"><a href="#Github-repository-瘦身" class="headerlink" title="Github repository 瘦身"></a>Github repository 瘦身</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chengxy-nds/p/17306115.html">被吐槽 GitHub仓 库太大，直接 600M 瘦身到 6M，这下舒服了</a> </p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7218850784330350629">查看github仓库大小</a></p>
</blockquote>
<p>只在乎代码的成功运行和快速下载和浏览，不在乎提交记录！直接干脆彻底一点，清理掉仓库的所有提交记录，一劳永逸。既要清除一个分支上的所有提交记录，同时又不能删除这个分支本身，其实我们可以迂回一下。</p>
<ol>
<li>我们首先使用 –orphan 命令创建一个全新的分支new-branch，这个新建的分支和其他分支没有任何关系，它不会包含任何先前的提交记录或者历史记录。相当于新建了一个干净的空分支，并让该分支指向一个全新的根节点。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout --orphan &lt;new-branch-name&gt;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>然后 commit 全部的项目文件到这个分支，暂不需要推到远程仓库。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add -A<br>git commit -am <span class="hljs-string">&quot;Initial commit&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>接着删除旧的分支，并把新建的分支名改成旧分支名称，推到远程仓库就行了。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch -D &lt;old-branch-name&gt;<br>git branch -m &lt;old-branch-name&gt;<br>git push -f origin &lt;old-branch-name&gt;<br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="Commit-Message-个人规范"><a href="#Commit-Message-个人规范" class="headerlink" title="Commit Message 个人规范"></a>Commit Message 个人规范</h2><ol>
<li><p>改代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Modify] file1\file2\file3 &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure></li>
<li><p>加模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Add] file1-newmodel\file2-newmodel\ &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>解决BUG</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Fix] file1-fixedbugs\file2-fixedbugs\ &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>删除文件、代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Del] file1\file2-codes\ &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>组合使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Modify] file1\file2\file3 [Fix] file1-fixedbugs\file2-fixedbugs [Del] file1\file2-codes &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>待解决</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;[Todo] xxxx &#123;from hjl-3090server&#125;&quot;</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h2 id="Git忽略规则-gitignore不生效"><a href="#Git忽略规则-gitignore不生效" class="headerlink" title="Git忽略规则.gitignore不生效"></a>Git忽略规则.gitignore不生效</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/634481">Git忽略规则.gitignore不生效-阿里云开发者社区 (aliyun.com)</a></p>
</blockquote>
<p>在项目开发过程中个，一般都会添加 .gitignore 文件，规则很简单，但有时会发现，规则不生效。<br>原因是 .gitignore 只能忽略那些原来没有被track的文件，如果某些文件已经被纳入了版本管理中，则修改.gitignore是无效的。<br>那么解决方法就是先把本地缓存删除（改变成未track状态），然后再提交。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> -r --cached .<br>git add .<br>git commit -m <span class="hljs-string">&#x27;update .gitignore&#x27;</span><br></code></pre></td></tr></table></figure>

<h2 id="git-clean-xfd-危险，不要用！"><a href="#git-clean-xfd-危险，不要用！" class="headerlink" title="git clean -xfd (危险，不要用！)"></a>git clean -xfd (危险，不要用！)</h2><p>git clean -xfd 命令会删除你的工作目录中所有未被 Git 跟踪的文件和目录。这是一个非常危险的命令，因为它会永久删除文件，所以在运行之前你应该非常小心。<br>问ChatGLM关于gitignore规则不生效的问题，它给说了一个这个方法，使用这个方法试了一下，好家伙！目录下的所有文件全都删了。。。。服了！！所有程序重写了。。。</p>
<h2 id="git命令"><a href="#git命令" class="headerlink" title="git命令"></a>git命令</h2><h3 id="branch-3090-2分支的修改merge到main上"><a href="#branch-3090-2分支的修改merge到main上" class="headerlink" title="branch_3090_2分支的修改merge到main上"></a>branch_3090_2分支的修改merge到main上</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 切换到branch_3090_2分支</span><br>git checkout branch_3090_2<br><br><span class="hljs-comment"># 2. 拉取到本地</span><br>git pull origin branch_3090_2 or git pull<br><br><span class="hljs-comment"># 3. 切换到main分支</span><br>git checkout main<br><br><span class="hljs-comment"># 4. 合并代码到main分支</span><br>git merge branch_3090_2<br><br><span class="hljs-comment"># 5. 检查，是否合并成功，是否有冲突</span><br>git status <br><br><span class="hljs-comment"># 6. 推送代码</span><br>git push origin main or git push<br></code></pre></td></tr></table></figure>

<h3 id="拉取远端main分支更新到branch-3080分支上"><a href="#拉取远端main分支更新到branch-3080分支上" class="headerlink" title="拉取远端main分支更新到branch_3080分支上"></a>拉取远端main分支更新到branch_3080分支上</h3><p>首先把当前在本地对branch_3080分支上的修改先commit一下或者是使用<code>git checkout .</code>撤销掉当前的修改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 切换到main分支</span><br>git checkout main<br><br><span class="hljs-comment"># 2. 远端的main拉取到本地</span><br>git pull origin main or git pull<br><br><span class="hljs-comment"># 3. 切换到branch_3080分支</span><br>git checkout branch_3080<br><br><span class="hljs-comment"># 4. merge</span><br>git merge main<br><br><span class="hljs-comment"># 5. 检查</span><br>git status<br><br><span class="hljs-comment"># 6. 推送</span><br>git push origin branch_3080 or git push<br></code></pre></td></tr></table></figure>

<h3 id="新建本地分支，然后推送到远程"><a href="#新建本地分支，然后推送到远程" class="headerlink" title="新建本地分支，然后推送到远程"></a>新建本地分支，然后推送到远程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 在本地新建一个名为“branch_4090_2”的分支</span><br>(base) houjinliang@4090server2:~/MyCVProject/eSuperResolution/SR_Benchmark$ git checkout -b branch_4090_2<br><br><span class="hljs-comment"># 推送到远端（github.com），远端的分支名称可以与本地分支同名，也可以不同</span><br>(base) houjinliang@4090server2:~/MyCVProject/eSuperResolution/SR_Benchmark$ git push origin branch_4090_2:branch_4090_2<br></code></pre></td></tr></table></figure>

<h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p>git branch 是Git版本控制系统中的一个基本命令，用于列出、创建或删除分支。下面是 git branch 命令的一些基本用法和含义：</p>
<ul>
<li>列出分支：git branch：列出所有本地分支。当前所在的分支前面会有一个 * 号。</li>
<li>创建分支：git branch <branch-name>：创建一个名为 <branch-name> 的新分支，但不会切换到新分支。</li>
<li>删除分支：git branch -d <branch-name>：删除名为 <branch-name> 的本地分支。</li>
<li>强制删除: git branch -D <branch-name>：强制删除名为 <branch-name> 的本地分支，即使它有未合并的更改。</li>
<li>重命名分支：git branch -m <old-branch-name> <new-branch-name>：将 <old-branch-name> 分支重命名为 <new-branch-name>。</li>
<li>查看分支详细信息：git branch -v：列出所有本地分支及其最后提交的信息。</li>
<li>创建并切换分支：git checkout -b <branch-name>：创建一个新分支 <branch-name> 并立即切换到该分支。</li>
<li>跟踪分支：git branch –track <local-branch> <remote-branch>：创建一个本地分支 <local-branch> 以跟踪远程分支 <remote-branch>。</li>
<li>设置上游分支：git branch –set-upstream-to&#x3D;<remote>&#x2F;<branch> <local-branch>：为本地分支 <local-branch> 设置上游分支 <remote>&#x2F;<branch>。<br>在没有参数的情况下，git branch 命令会显示所有本地分支，并标明当前所在的分支。分支在Git中是一种轻量级、可快速切换的工作环境，可以让你在不影响主分支的情况下进行开发工作。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch<br>git branch -a：这个命令会列出所有本地分支和远程分支。-a标志代表“all”，意味着显示所有分支，不仅仅是当前所在的分支。<br>git branch -r：这个命令仅列出所有远程分支。-r标志代表“remote”，意味着只显示远程仓库的分支信息。<br><br>(base) houjinliang@4090server2:~/MyCVProject/eSuperResolution/SR_Benchmark$ git branch -a<br>* branch_4090_2<br>  main<br>  remotes/origin/HEAD -&gt; origin/main<br>  remotes/origin/branch_3080<br>  remotes/origin/branch_3090<br>  remotes/origin/branch_3090_2<br>  remotes/origin/branch_4090<br>  remotes/origin/branch_4090_2<br>  remotes/origin/main<br><br>(base) houjinliang@4090server2:~/MyCVProject/eSuperResolution/SR_Benchmark$ git branch -r<br>  origin/HEAD -&gt; origin/main<br>  origin/branch_3080<br>  origin/branch_3090<br>  origin/branch_3090_2<br>  origin/branch_4090<br>  origin/branch_4090_2<br>  origin/main<br></code></pre></td></tr></table></figure>
<p>在Git中，remote 和 origin 以及 HEAD 都是具有特定含义的关键字：</p>
<ul>
<li><p>remote: 在Git中，remote 是指一个远程仓库的引用。远程仓库是托管在网络上，可以被多个用户克隆和推送的仓库。你可以通过SSH、HTTP&#x2F;HTTPS等方式与远程仓库进行交互。</p>
</li>
<li><p>origin: origin 是默认的远程仓库名称。当使用 git clone 命令克隆一个仓库时，Git会自动将克隆的仓库命名为 origin。这是一个约定俗成的名称，但你可以通过配置来更改它。通常，origin 指的是你克隆仓库的原始位置。</p>
</li>
<li><p>HEAD: HEAD 是Git中一个特殊的引用，它指向当前所在的分支的最后一次提交。简单来说，HEAD 表示当前的工作位置。当你切换分支或者进行提交时，HEAD 的指向会改变。</p>
</li>
<li><p>remotes&#x2F;origin&#x2F;HEAD -&gt; origin&#x2F;main：这表示远程仓库 origin 的 HEAD 指向了分支 main。这意味着如果你在本地克隆这个仓库，并且没有切换到其他分支，那么 HEAD 会在本地指向 main 分支。</p>
</li>
<li><p>remotes&#x2F;origin&#x2F;branch_3080、remotes&#x2F;origin&#x2F;branch_3090 等等：这些都是远程仓库 origin 中的分支。它们表示在远程仓库上有不同的开发线或特性分支。</p>
</li>
<li><p>origin&#x2F;main：这是远程仓库 origin 的 main 分支。通常，main（或者在某些情况下是 master）是主分支，包含了项目的主要开发历史。</p>
</li>
</ul>
<p>总的来说，remote origin 是指你通过Git克隆或添加的远程仓库的默认名称，而 HEAD 是一个指针，它告诉你当前在哪个提交上工作，无论是在本地分支还是远程跟踪分支。</p>
<h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h3><p>git checkout 是Git中的一个多功能命令，它主要有以下两种用法：</p>
<ul>
<li>切换分支：git checkout <branch>：这个命令用于切换到名为 <branch> 的分支。如果 <branch> 存在于本地仓库中，Git会将你的工作副本更新为 <branch> 分支的最新状态。</li>
<li>恢复文件：git checkout – <file>：这个命令用于从暂存区（或者某个特定的提交）恢复文件 <file> 到工作目录中。这通常用于撤销对文件的未提交更改。</li>
</ul>
<p>git checkout -b <new-branch>： -b 选项告诉Git在执行 checkout 命令的同时创建一个新分支 <new-branch>。如果当前分支是 <current-branch>，那么这个命令会创建一个从 <current-branch> 分支的最新提交开始的新分支 <new-branch>，并立即切换到这个新分支。这实际上等价于以下两个命令的组合：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch &lt;new-branch&gt;<br>git checkout &lt;new-branch&gt;<br></code></pre></td></tr></table></figure>

<h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><p>git fetch 是Git中的一个命令，用于从远程仓库获取最新的数据，但不合并到当前的工作分支。</p>
<ul>
<li>获取远程仓库的数据：git fetch 命令会访问远程仓库，并下载所有你还没有的数据。这包括所有分支的更新以及任何你还没有的标签。</li>
<li>更新远程跟踪分支：当 git fetch 执行后，它更新你的远程跟踪分支（通常是 origin&#x2F;<branch> 的形式）。这些远程跟踪分支是你本地仓库中远程仓库分支的副本。</li>
<li>不会影响你的工作副本：重要的是要注意，git fetch 命令本身不会改变你工作目录中的文件（即你的当前工作副本）。它只是下载数据，并更新你的远程跟踪分支。</li>
</ul>
<p>下面是 git fetch 命令的一些使用场景：</p>
<ul>
<li>查看更新：如果你想查看远程仓库有什么更新，但不希望立即将这些更新合并到你的当前分支，你可以使用 git fetch 来获取这些信息。</li>
<li>准备合并或变基：在合并来自远程仓库的更改之前，你可以使用 git fetch 来更新你的远程跟踪分支，然后你可以决定是使用 git merge 来合并这些更改，还是使用 git rebase 来在你的本地分支上重新应用这些更改。</li>
<li>多人协作：在一个多人协作的项目中，git fetch 可以帮助你了解其他开发者在远程仓库上所做的更改，而不影响你当前的工作。</li>
</ul>
<h3 id="git-push-origin-branch-3090-2"><a href="#git-push-origin-branch-3090-2" class="headerlink" title="git push origin branch_3090_2"></a>git push origin branch_3090_2</h3><p>这个命令的作用是将你本地的分支 branch_3090_2 推送到远程仓库 origin。如果远程仓库中已经存在一个同名的分支，Git 将会更新该远程分支以匹配你的本地分支。如果远程仓库中没有这个分支，Git 将会创建一个新的远程分支。</p>
<h3 id="git-push-origin-branch-3090-2-1"><a href="#git-push-origin-branch-3090-2-1" class="headerlink" title="git push origin branch_3090_2"></a>git push origin branch_3090_2</h3><p>git push origin –delete branch_3090_2： 这个命令的作用是删除远程仓库 origin 上的分支 branch_3090_2。–delete 标志告诉 Git 你想要删除一个远程分支。执行这个命令后，远程仓库中名为 branch_3090_2 的分支将被移除</p>
<h3 id="git如何从主分支更新到自己的分支"><a href="#git如何从主分支更新到自己的分支" class="headerlink" title="git如何从主分支更新到自己的分支"></a>git如何从主分支更新到自己的分支</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://worktile.com/kb/ask/226218.html">git如何从主分支更新到自己的分支</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010234868/article/details/126979707">git将master主分支最新代码合并到自己的分支</a></p>
</blockquote>
<p>要从主分支更新到自己的分支，可以按照以下步骤进行操作：</p>
<ol>
<li><p>确定当前所在分支：使用命令<code>git branch</code>查看当前所在的分支，确认是否在主分支。</p>
</li>
<li><p>切换到主分支：如果不在主分支，可以使用命令<code>git checkout main</code>（main替换为你的主分支名称）切换到主分支。</p>
</li>
<li><p>更新主分支：在主分支上，使用命令<code>git pull origin main</code>来拉取远程主分支的最新代码。</p>
</li>
<li><p>切换到自己的分支：使用命令<code>git checkout branch_3080</code>（branch_3080替换为你的分支名称）切换回你的分支。</p>
</li>
<li><p>合并主分支的更新：使用命令<code>git merge main</code>将主分支的更新合并到你的分支。</p>
</li>
<li><p>处理冲突（如果有）：如果合并过程中发生冲突，需要根据提示手动解决冲突，并使用<code>git add</code>命令将解决后的文件标记为已解决。</p>
</li>
<li><p>提交更新：使用命令<code>git commit -m &quot;Merge updates from main branch&quot;</code>提交合并的更新。</p>
</li>
<li><p>推送到远程仓库：使用命令<code>git push origin branch_3080</code>将更新的代码推送到远程仓库的你的分支。</p>
</li>
</ol>
<p>完成以上步骤后，你的分支就会包含主分支的最新更新内容。记得定期更新主分支，以便保持代码同步和避免冲突。</p>
<h1 id="Conda-env"><a href="#Conda-env" class="headerlink" title="Conda env"></a>Conda env</h1><h2 id="conda环境打包，然后从一个设备迁移到另外的一个设备"><a href="#conda环境打包，然后从一个设备迁移到另外的一个设备" class="headerlink" title="conda环境打包，然后从一个设备迁移到另外的一个设备"></a>conda环境打包，然后从一个设备迁移到另外的一个设备</h2><ol>
<li><p>直接把整个环境打包成压缩包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># pip 下载安装conda-pack包</span><br>(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ pip install conda-pack<br><br><span class="hljs-comment"># 查看当前设备的conda environments:</span><br>(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ conda <span class="hljs-built_in">env</span> list<br><br>base                     /mnt/houjinliang/miniconda3<br>SSPSR                 *  /mnt/houjinliang/miniconda3/envs/SSPSR<br>xxxxx                     xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br><br><span class="hljs-comment">#把SSPSR环境打包</span><br>(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ conda pack -n SSPSR<br>Collecting packages...<br>Packing environment at <span class="hljs-string">&#x27;/mnt/houjinliang/miniconda3/envs/SSPSR&#x27;</span> to <span class="hljs-string">&#x27;SSPSR.tar.gz&#x27;</span><br>[#################################       ] | 83% Completed |  3min 30.7s<br></code></pre></td></tr></table></figure>
</li>
<li><p>把环境压缩包上传到新设备上，直接在对应位置解压缩</p>
</li>
</ol>
<blockquote>
<ul>
<li>最常用的文件传输软件FileZilla居然只支持本地站点和远程指点之间的文件传输，两个远程站点之间的传输不支持。所以只能借助本地为桥梁，先传到本地，在传到新服务器上。（不对！）</li>
<li>可以借助scp命令，见“两台服务器之间传文件”</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 先在新服务器上建立整个环境的文件夹</span><br>(base) houjinliang@3090server:~/miniconda3/envs/SSPSR$ <span class="hljs-built_in">pwd</span><br>/mnt/houjinliang/miniconda3/envs/SSPSR<br><br><span class="hljs-comment">## 2. 解压</span><br>(base) houjinliang@3090server:~/MyDownloadFiles$ tar -xzvf SSPSR.tar.gz -C /mnt/houjinliang/miniconda3/envs/SSPSR<br><br><span class="hljs-comment">## 3. 查看</span><br>(base) houjinliang@3090server:~/MyDownloadFiles$ conda <span class="hljs-built_in">env</span> list<br>base                  *  /mnt/houjinliang/miniconda3<br>SSPSR                    /mnt/houjinliang/miniconda3/envs/SSPSR<br><br><span class="hljs-comment"># 完成虚拟环境的迁移了！</span><br></code></pre></td></tr></table></figure>

<h2 id="environment-yml"><a href="#environment-yml" class="headerlink" title="environment.yml"></a>environment.yml</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ conda <span class="hljs-built_in">env</span> <span class="hljs-built_in">export</span> &gt; environment.yml<br><br>conda <span class="hljs-built_in">env</span> create -f environment.yml<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda <span class="hljs-built_in">env</span> create -f environment.yml<br><br><span class="hljs-comment"># 新建的环境根据yml中的name来命名新环境</span><br></code></pre></td></tr></table></figure>
<h2 id="conda环境打包"><a href="#conda环境打包" class="headerlink" title="conda环境打包"></a>conda环境打包</h2><ol>
<li>直接把整个环境打包成压缩包<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ pip install conda-pack<br>(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ conda <span class="hljs-built_in">env</span> list<br><span class="hljs-comment"># conda environments:</span><br><span class="hljs-comment">#</span><br>base                     /mnt/houjinliang/miniconda3<br>SSPSR                 *  /mnt/houjinliang/miniconda3/envs/SSPSR<br>xxxxx                     xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br><br>(SSPSR) houjinliang@3080server:~/MyCVProject/eSuperResolution/Re_SSPSR$ conda pack -n SSPSR<br>Collecting packages...<br>Packing environment at <span class="hljs-string">&#x27;/mnt/houjinliang/miniconda3/envs/SSPSR&#x27;</span> to <span class="hljs-string">&#x27;SSPSR.tar.gz&#x27;</span><br>[#################################       ] | 83% Completed |  3min 30.7s<br></code></pre></td></tr></table></figure></li>
<li>把环境压缩包上传到新设备上，直接在对应位置解压缩</li>
</ol>
<p>最常用的文件传输软件FileZilla居然支支持本地站点和远程指点之间的文件传输，两个远程站点之间的传输不支持。所以只能借助本地为桥梁，先传到本地，在传到新服务器上。</p>
<p>现在新服务器上建立整个环境的文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) houjinliang@3090server:~/miniconda3/envs/SSPSR$ <span class="hljs-built_in">pwd</span><br>/mnt/houjinliang/miniconda3/envs/SSPSR<br></code></pre></td></tr></table></figure>

<p>解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) houjinliang@3090server:~/MyDownloadFiles$ tar -xzvf SSPSR.tar.gz -C /mnt/houjinliang/miniconda3/envs/SSPSR<br></code></pre></td></tr></table></figure>

<p>完成虚拟环境的迁移了！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">(base) houjinliang@3090server:~/MyDownloadFiles$ conda <span class="hljs-built_in">env</span> list<br><span class="hljs-comment"># conda environments:</span><br><span class="hljs-comment">#</span><br>base                  *  /mnt/houjinliang/miniconda3<br>SSPSR                    /mnt/houjinliang/miniconda3/envs/SSPSR<br></code></pre></td></tr></table></figure>

<h2 id="使用clone方法创建Torch环境的流程"><a href="#使用clone方法创建Torch环境的流程" class="headerlink" title="使用clone方法创建Torch环境的流程"></a>使用clone方法创建Torch环境的流程</h2><p><img src="https://murphyimg.oss-cn-beijing.aliyuncs.com/img/202506011236297.png" srcset="https://murhyimgur.oss-cn-beijing.aliyuncs.com/website/loading.gif" lazyload alt="image-20240718150404471"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda create -n py38torch1101-cu113 python=3.8<br><span class="hljs-built_in">cd</span> MyDownloadFiles/offlinefile/<br>pip install torch-1.10.1+cu113-cp38-cp38-linux_x86_64.whl torchvision-0.11.2+cu113-cp38-cp38-linux_x86_64.whl<br>conda create -n MotionBERT --<span class="hljs-built_in">clone</span> py38torch1101-cu113<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">(py38torch1101-cu113) houjinliang@3080server:~$ pip list<br>Package           Version<br>----------------- ------------<br>cachetools        5.3.3<br>numpy             1.24.4<br>nvidia-ml-py      12.535.161<br>nvitop            1.3.2<br>pillow            10.4.0<br>pip               24.0<br>psutil            6.0.0<br>setuptools        69.5.1<br>termcolor         2.4.0<br>torch             1.10.1+cu113<br>torchvision       0.11.2+cu113<br>typing_extensions 4.12.2<br>wheel             0.43.0<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">(py38torch1101-cu113) houjinliang@3080server:~/MyDownloadFiles/offlinefile$ ll<br>总用量 44156456<br>drwxrwxr-x  6 houjinliang houjinliang        4096 7月  12 11:10 ./<br>drwxrwxr-x 12 houjinliang houjinliang        4096 7月  12 12:03 ../<br>-rw-rw-r--  1 houjinliang houjinliang  1821456984 5月  30 22:41 torch-1.10.0+cu113-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1821412903 6月  13 19:58 torch-1.10.0+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang   881913771 6月  13 19:58 torch-1.10.1-cp38-cp38-manylinux1_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1831320975 7月  11 16:40 torch-1.10.1+cu113-cp38-cp38-linux_x86_64.whl ⭐<br>-rw-rw-r--  1 houjinliang houjinliang  1821442173 6月  13 19:42 torch-1.10.2+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1837736693 5月   9 16:33 torch-1.12.1+cu113-cp39-cp39-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1156750317 6月  13 15:45 torch-1.7.1+cu110-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang   735494141 5月  30 22:21 torch-1.8.0-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1982170278 5月  30 22:40 torch-1.8.1+cu111-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    23185811 5月  30 22:44 torchvision-0.10.0+cu111-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    21802303 5月  30 22:38 torchvision-0.11.0+cu113-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    21800388 6月  13 19:50 torchvision-0.11.0+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    24585273 6月  13 19:48 torchvision-0.11.2+cu113-cp38-cp38-linux_x86_64.whl ⭐<br>-rw-rw-r--  1 houjinliang houjinliang    12930152 6月  13 15:44 torchvision-0.8.2+cu110-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1999639040 1月   1  2019 VOCtrainval_11-May-2012.tar<br></code></pre></td></tr></table></figure>


<h2 id="使用clone方法创建PyTorch环境的流程-个人"><a href="#使用clone方法创建PyTorch环境的流程-个人" class="headerlink" title="使用clone方法创建PyTorch环境的流程(个人)"></a>使用clone方法创建PyTorch环境的流程(个人)</h2><ol>
<li>模板环境<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># py38torch1101-cu113是个人的一个模板环境</span><br>conda create -n py38torch1101-cu113 python=3.8<br><span class="hljs-built_in">cd</span> MyDownloadFiles/offlinefile/<br>pip install torch-1.10.1+cu113-cp38-cp38-linux_x86_64.whl torchvision-0.11.2+cu113-cp38-cp38-linux_x86_64.whl<br></code></pre></td></tr></table></figure></li>
</ol>
<p>看一下模板环境有什么包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">(py38torch1101-cu113) houjinliang@3080server:~$ pip list<br>Package           Version<br>----------------- ------------<br>cachetools        5.3.3<br>numpy             1.24.4<br>nvidia-ml-py      12.535.161<br>nvitop            1.3.2<br>pillow            10.4.0<br>pip               24.0<br>psutil            6.0.0<br>setuptools        69.5.1<br>termcolor         2.4.0<br>torch             1.10.1+cu113<br>torchvision       0.11.2+cu113<br>typing_extensions 4.12.2<br>wheel             0.43.0<br></code></pre></td></tr></table></figure>

<p>看一下模板环境用的什么版本的pytorch离线包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">(py38torch1101-cu113) houjinliang@3080server:~/MyDownloadFiles/offlinefile$ ll<br>总用量 44156456<br>drwxrwxr-x  6 houjinliang houjinliang        4096 7月  12 11:10 ./<br>drwxrwxr-x 12 houjinliang houjinliang        4096 7月  12 12:03 ../<br>-rw-rw-r--  1 houjinliang houjinliang  1821456984 5月  30 22:41 torch-1.10.0+cu113-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1821412903 6月  13 19:58 torch-1.10.0+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang   881913771 6月  13 19:58 torch-1.10.1-cp38-cp38-manylinux1_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1831320975 7月  11 16:40 torch-1.10.1+cu113-cp38-cp38-linux_x86_64.whl ⭐<br>-rw-rw-r--  1 houjinliang houjinliang  1821442173 6月  13 19:42 torch-1.10.2+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1837736693 5月   9 16:33 torch-1.12.1+cu113-cp39-cp39-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1156750317 6月  13 15:45 torch-1.7.1+cu110-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang   735494141 5月  30 22:21 torch-1.8.0-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1982170278 5月  30 22:40 torch-1.8.1+cu111-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    23185811 5月  30 22:44 torchvision-0.10.0+cu111-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    21802303 5月  30 22:38 torchvision-0.11.0+cu113-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    21800388 6月  13 19:50 torchvision-0.11.0+cu113-cp38-cp38-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang    24585273 6月  13 19:48 torchvision-0.11.2+cu113-cp38-cp38-linux_x86_64.whl ⭐<br>-rw-rw-r--  1 houjinliang houjinliang    12930152 6月  13 15:44 torchvision-0.8.2+cu110-cp37-cp37m-linux_x86_64.whl<br>-rw-rw-r--  1 houjinliang houjinliang  1999639040 1月   1  2019 VOCtrainval_11-May-2012.tar<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>通过clone模板环境<code>py38torch1101-cu113</code>，建立新的环境<code>MotionBERT</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">conda create -n MotionBERT --<span class="hljs-built_in">clone</span> py38torch1101-cu113<br></code></pre></td></tr></table></figure></li>
</ol>
<h1 id="Python-Dev"><a href="#Python-Dev" class="headerlink" title="Python Dev"></a>Python Dev</h1><h2 id="wandb-nvidia-gpu-stat占过多的CPU资源"><a href="#wandb-nvidia-gpu-stat占过多的CPU资源" class="headerlink" title="wandb : nvidia_gpu_stat占过多的CPU资源"></a>wandb : nvidia_gpu_stat占过多的CPU资源</h2><p><a target="_blank" rel="noopener" href="https://github.com/wandb/wandb/issues/8359">wandb&#x2F;wandb: [Bug]: nvidia_gpu_stats binary causes high CPU cycle usage. </a></p>
<p>在跑程序的时候遇到一个问题，服务器的CPU资源占据非常高！使用top命令查看发现是有好多“nvidia_gpu_stats”进程在疯狂占据CPU的资源，网上搜索了一下发现，这是wandb的锅！wandb会监控系统的资源，将其关掉就好了！（这样就看不到GPU的log曲线了，但这个也没什么用处，关了也无妨。</p>
<h2 id="Matplotlib-cmap"><a href="#Matplotlib-cmap" class="headerlink" title="Matplotlib - cmap"></a>Matplotlib - cmap</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/users/explain/customizing.html#matplotlibrc-sample">matplotlib</a></p>
<h2 id="torchvision-models-pretrained-models"><a href="#torchvision-models-pretrained-models" class="headerlink" title="torchvision.models -&gt; pretrained models"></a>torchvision.models -&gt; pretrained models</h2><p>模型下载地址更改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 默认的地址</span><br>&gt;&gt;&gt; import torch<br>&gt;&gt;&gt; torch.hub.get_dir()<br><span class="hljs-string">&#x27;/data/houjinliang/.cache/torch/hub&#x27;</span><br><br><span class="hljs-comment"># 更改地址</span><br><span class="hljs-comment"># 1. 先建立一个文件夹</span><br>&gt;&gt;&gt; import os<br>&gt;&gt;&gt; current_workspace_path = os.getcwd()<br>&gt;&gt;&gt; torch_pretrained_model_path = os.path.join(current_workspace_path, <span class="hljs-string">&#x27;torch_pretrained_model&#x27;</span>)<br>&gt;&gt;&gt; <span class="hljs-keyword">if</span> not os.path.exists(torch_pretrained_model_path):<br>...         os.makedirs(torch_pretrained_model_path)<br><span class="hljs-comment"># 2. 使用os.environ设置Torch HOME</span><br>&gt;&gt;&gt; os.environ[<span class="hljs-string">&#x27;TORCH_HOME&#x27;</span>] = torch_pretrained_model_path<br>&gt;&gt;&gt; torch.hub.get_dir()<br><span class="hljs-string">&#x27;/data/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/torch_pretrained_model/hub&#x27;</span><br><span class="hljs-comment"># 3. 检查</span><br>&gt;&gt;&gt; <span class="hljs-built_in">print</span>(f<span class="hljs-string">&quot;This pretrained model downloaded by Torchvision will save at &#123;torch.hub.get_dir()&#125;&quot;</span>)<br>This pretrained model downloaded by Torchvision will save at /data/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/torch_pretrained_model/hub<br><span class="hljs-comment">#4. 下载</span><br>&gt;&gt;&gt; import torchvision.models as models<br>&gt;&gt;&gt; net = models.vgg16(pretrained=True)<br>Downloading: <span class="hljs-string">&quot;https://download.pytorch.org/models/vgg16-397923af.pth&quot;</span> to /mnt/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/torch_pretrained_model/hub/checkpoints/vgg16-397923af.pth<br></code></pre></td></tr></table></figure>

<h2 id="感知损失-Perceptual-Losses"><a href="#感知损失-Perceptual-Losses" class="headerlink" title="感知损失(Perceptual Losses)"></a>感知损失(Perceptual Losses)</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24720434">感知损失|知乎</a></p>
<h2 id="如何理解-“图像傅里叶变换的频谱图”"><a href="#如何理解-“图像傅里叶变换的频谱图”" class="headerlink" title="如何理解 “图像傅里叶变换的频谱图”"></a>如何理解 “图像傅里叶变换的频谱图”</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30263737/article/details/82759958">CSDN</a><br>这篇文章写的还是比较通俗易懂的，可能不是那么深入，但至少是就能把频谱图给看懂了。</p>
</blockquote>
<h2 id="通过ssh方式连接的服务器如何查看图片"><a href="#通过ssh方式连接的服务器如何查看图片" class="headerlink" title="通过ssh方式连接的服务器如何查看图片"></a>通过ssh方式连接的服务器如何查看图片</h2><p>通过ssh方式连接的服务器，在运行plt.imshow()的时候，因为没有桌面，是无法显示图像的。如何解决？</p>
<ol>
<li>plt.imsave()，保存到服务器上，然后用vscode查看。</li>
<li>使用visdom工具。</li>
</ol>
<p>visdom工具在做本科毕设的使用用到过，这次再拿出来用一下。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/fossasia/visdom">fossasia&#x2F;visdom</a></p>
<h2 id="超分任务不使用BN"><a href="#超分任务不使用BN" class="headerlink" title="超分任务不使用BN"></a>超分任务不使用BN</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33590958/article/details/104859909">超分辨中为什么不用BN层？</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wioponsen/p/13821625.html">超分网络一般不需要BN</a></p>
</blockquote>
<p>Batch Norm可谓深度学习中非常重要的技术，不仅可以使训练更深的网络变容易，加速收敛，还有一定正则化的效果，可以防止模型过拟合。在很多基于CNN的分类任务中，被大量使用。<br>但在图像超分辨率和图像生成方面，Batch Norm的表现并不好，加入了Batch Norm，反而使得训练速度缓慢，不稳定，甚至最后发散。</p>
<p>以图像超分辨率来说，网络输出的图像在色彩、对比度、亮度上要求和输入一致，改变的仅仅是分辨率和一些细节，而Batch Norm，对图像来说类似于一种对比度的拉伸，任何图像经过Batch Norm后，其色彩的分布都会被归一化，也就是说，它破坏了图像原本的对比度信息，所以Batch Norm的加入反而影响了网络输出的质量。虽然Batch Norm中的scale和shift参数可以抵消归一化的效果，但这样就增加了训练的难度和时间，还不如直接不用。不过有一类网络结构可以用，那就是残差网络（Residual Net），但也仅仅是在residual block当中使用，比如SRResNet，就是一个用于图像超分辨率的残差网络。为什么这类网络可以使用Batch Norm呢？有人认为是因为图像的对比度信息可以通过skip connection直接传递，所以也就不必担心Batch Norm的破坏了。</p>
<p>基于这种想法，也可以从另外一种角度解释Batch Norm为何在图像分类任务上如此有效。图像分类不需要保留图像的对比度信息，利用图像的结构信息就可以完成分类，所以，将图像都通过Batch Norm进行归一化，反而降低了训练难度，甚至一些不明显的结构，在Batch Norm后也会被凸显出来（对比度被拉开了）。</p>
<p>而对于照片风格转移，为何可以用Batch Norm呢？原因在于，风格化后的图像，其色彩、对比度、亮度均和原图像无关，而只与风格图像有关，原图像只有结构信息被表现到了最后生成的图像中。因此，在照片风格转移的网络中使用Batch Norm或者Instance Norm也就不奇怪了，而且，Instance Norm是比Batch Norm更直接的对单幅图像进行的归一化操作，连scale和shift都没有。</p>
<p>说得更广泛一些，Batch Norm会忽略图像像素（或者特征）之间的绝对差异（因为均值归零，方差归一），而只考虑相对差异，所以在不需要绝对差异的任务中（比如分类），有锦上添花的效果。而对于图像超分辨率这种需要利用绝对差异的任务，Batch Norm只会添乱。</p>
<h2 id="模型复杂度评估"><a href="#模型复杂度评估" class="headerlink" title="模型复杂度评估"></a>模型复杂度评估</h2><p>这三个指标可以用来衡量模型的复杂度，即模型计算量的大小。</p>
<ul>
<li>FLOPs（Floating point operations per second）是指每秒浮点运算次数</li>
<li>MACs （Multiply-Accumulate Operations）是指乘加操作的次数</li>
<li>Params（Parameters）是指模型的参数数量。</li>
</ul>
<h2 id="✖️查看模型权重和模型结构（pth2pnnx-netron，tensorboard-add-graph）"><a href="#✖️查看模型权重和模型结构（pth2pnnx-netron，tensorboard-add-graph）" class="headerlink" title="✖️查看模型权重和模型结构（pth2pnnx, netron，tensorboard.add_graph）"></a>✖️查看模型权重和模型结构（pth2pnnx, netron，tensorboard.add_graph）</h2><p>在使用netron查看模型的权重和文件的时候，如果直接查看pth。<br>netron trained_model&#x2F;PaviaC_NationalDay6_Window4_Embed60_Subs16_Ovlps4_Scale4_Epochs150_2024_10_07_01_16_13.pth<br>Serving ‘trained_model&#x2F;PaviaC_NationalDay6_Window4_Embed60_Subs16_Ovlps4_Scale4_Epochs150_2024_10_07_01_16_13.pth’ at <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a><br>是看不到模型结构的，只有模型的节点权重。</p>
<p>有一个解决办法是把pth转onnx<br>netron trained_model&#x2F;PaviaC_NationalDay6_Window4_Embed60_Subs16_Ovlps4_Scale4_Epochs150_2024_10_07_01_16_13.onnx</p>
<p>然后就能看到模型的结构了。</p>
<p>但带来一个问题是，模型太复杂了，电脑根本带不动，特别特别卡顿！<br>虽然是在服务器端运行，但是显示是在终端的浏览器上，所以还是需要终端的电脑足够强的。</p>
<p>所以还是不用了。</p>
<p>此外，使用tensorboard的add_graph API也可以，但是没在所有的模型上调通（也是不用了）。并且调通了之后发现也是特别卡，对设备的性能要求还是很高啊。</p>
<h2 id="wandb-sync-offline"><a href="#wandb-sync-offline" class="headerlink" title="wandb sync offline"></a>wandb sync offline</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://zoeyuchao.github.io/2020/10/15/Weights-&-Biases%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html">Weights &amp; Biases使用指南 | github.io</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> wandb/<br><span class="hljs-built_in">ls</span> | grep -E <span class="hljs-string">&quot;run|offline&quot;</span> | grep -v latest | xargs wandb <span class="hljs-built_in">sync</span> --no-mark-synced<br></code></pre></td></tr></table></figure>

<h2 id="设置可见的CUDA"><a href="#设置可见的CUDA" class="headerlink" title="设置可见的CUDA"></a>设置可见的CUDA</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">os.environ[<span class="hljs-string">&#x27;CUDA_VISIBLE_DEVICES&#x27;</span>] = <span class="hljs-string">&#x27;6&#x27;</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Number of visible GPUs: <span class="hljs-subst">&#123;torch.cuda.device_count()&#125;</span>&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Current device index: <span class="hljs-subst">&#123;torch.cuda.current_device()&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># Number of visible GPUs: 1</span><br><span class="hljs-comment"># Current device index: 0</span><br><span class="hljs-comment"># 这里设置的可见的CUDA是只有cuda:6，所以在可见的cuda中，这个index是0.</span><br><span class="hljs-comment"># 因此如果print(x.device)输出的结果是cuda:0，则不一定代表当初的变量是在整个系统的cuda:0上，而是在可见的CUDA设备中的cuda:0上。</span><br></code></pre></td></tr></table></figure>


<h2 id="python-m-models-SSPSR-一种通过模块方式运行-Python-脚本的方式"><a href="#python-m-models-SSPSR-一种通过模块方式运行-Python-脚本的方式" class="headerlink" title="python -m models.SSPSR 一种通过模块方式运行 Python 脚本的方式"></a>python -m models.SSPSR 一种通过模块方式运行 Python 脚本的方式</h2><p>python -m models.SSPSR 是一种通过模块方式运行 Python 脚本的方式，-m 参数会让 Python 把指定的模块当作脚本来执行，同时能够正确处理模块的导入路径问题。</p>
<p>解释</p>
<blockquote>
<p>python -m：告诉 Python 解释器要运行一个模块，而不是直接运行一个文件。<br>models.SSPSR：这里表示模块的路径，即 models 是一个包（文件夹），SSPSR 是包中的一个模块（Python 文件 SSPSR.py）。<br>当你使用 python models&#x2F;SSPSR.py 运行脚本时，Python 会把当前工作目录作为路径的起点，而不考虑项目的根目录，因此它找不到 utils 目录中的模块。</p>
</blockquote>
<blockquote>
<p>使用 python -m models.SSPSR，Python 会从项目的根目录开始查找 models 包中的 SSPSR 模块，这样就能正确导入 utils 模块。</p>
</blockquote>
<p>要求</p>
<blockquote>
<p>要使用 python -m 的前提是你的项目结构必须符合 Python 包的规范：<br>models&#x2F; 和 utils&#x2F; 目录中应该有一个 <strong>init</strong>.py 文件（即使是空文件），告诉 Python 这些目录是包。<br>你需要在项目的根目录下运行这个命令，比如：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/MyCVProject/eSuperResolution/SR_Benchmark<br>python -m models.SSPSR<br><span class="hljs-comment"># 这样，Python 会正确解析 models 和 utils 目录间的相对路径。</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p><strong>init</strong>.py 是 Python 中的一个特殊文件，它的作用是将包含它的目录标记为一个 Python 包，使你可以通过模块导入的方式访问目录中的 Python 文件或子包。</p>
</blockquote>
<p>主要作用：</p>
<blockquote>
<ul>
<li>标记目录为包： 如果一个目录中包含 <strong>init</strong>.py，Python 会将这个目录当作一个包，允许你从外部导入该包及其中的模块。没有这个文件时，Python 会认为这个目录只是普通文件夹，不是包，无法使用 import 进行模块导入。</li>
<li>初始化包： <strong>init</strong>.py 还可以包含一些包的初始化代码，比如导入包中的某些模块或设置一些包级别的变量。</li>
</ul>
</blockquote>
<p>你的场景：</p>
<blockquote>
<p>你有一个 models 目录和一个 utils 目录，为了让 Python 能够正确识别 models 和 utils 作为包，你需要在这两个目录中各自添加一个 <strong>init</strong>.py 文件。</p>
</blockquote>
<p>操作步骤：</p>
<blockquote>
<p>在 models&#x2F; 目录中添加一个空的 <strong>init</strong>.py 文件：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> models/__init__.py<br><span class="hljs-comment"># 在 utils/ 目录中同样添加一个 __init__.py 文件：</span><br><span class="hljs-built_in">touch</span> utils/__init__.py<br><span class="hljs-comment"># 即使文件为空，它们也会告诉 Python 这些目录是包，从而让导入如 from utils.nn_units import ... 变得有效。</span><br></code></pre></td></tr></table></figure>

<h2 id="Python中的注释"><a href="#Python中的注释" class="headerlink" title="Python中的注释"></a>Python中的注释</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">r&quot;&quot;&quot;</span><br><span class="hljs-string">\n</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">\n</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>在Python中，<code>r&quot;&quot;&quot; &quot;&quot;&quot;</code> 是一个多行原始字符串的表示方式。这里的 <code>r</code> 代表 “raw”，意味着字符串中的转义字符不会被特殊处理。以下是关于原始字符串的一些要点：</li>
<li>原始字符串：在原始字符串中，反斜杠 <code>\</code> 不会被当作转义字符。例如，在普通字符串中 <code>\n</code> 表示换行，但在原始字符串中，<code>\n</code> 就是两个字符：反斜杠和字母 ‘n’。</li>
<li>多行字符串：使用三个双引号 “”” 或三个单引号 ‘’’ 可以创建一个多行字符串，字符串中的换行符会被保留。<br>所以，r””” “”” 结合了原始字符串和多行字符串的特性，意味着你可以创建一个跨越多行的字符串，同时不需要担心转义字符的问题。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 普通字符串</span><br>normal_str = <span class="hljs-string">&quot;This is a newline: \n followed by a backslash: \\&quot;</span><br><span class="hljs-built_in">print</span>(normal_str)<br><br><span class="hljs-comment"># 原始字符串</span><br>raw_str = <span class="hljs-string">r&quot;This is a newline: \n followed by a backslash: \\&quot;</span><br><span class="hljs-built_in">print</span>(raw_str)<br><br><span class="hljs-comment"># 输出结果</span><br>This <span class="hljs-keyword">is</span> a newline:<br> followed by a backslash: \<br>This <span class="hljs-keyword">is</span> a newline: \n followed by a backslash: \\<br></code></pre></td></tr></table></figure>

<h2 id="torch-nn-functional-pad-函数解释"><a href="#torch-nn-functional-pad-函数解释" class="headerlink" title="torch.nn.functional.pad 函数解释"></a>torch.nn.functional.pad 函数解释</h2><ul>
<li>在Swin Transformer中，因为要涉及到“图像”的尺寸需要把Window size整除，所以需要提前把“图像”给padding成合适的尺寸，这里就需要用到pad函数。</li>
<li><a target="_blank" rel="noopener" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">torch.nn.functional.pad|pytorch.org</a></li>
</ul>
<h2 id="os-environ-‘CUDA-VISIBLE-DEVICES’-args-gpus"><a href="#os-environ-‘CUDA-VISIBLE-DEVICES’-args-gpus" class="headerlink" title="os.environ[‘CUDA_VISIBLE_DEVICES’] &#x3D; args.gpus"></a>os.environ[‘CUDA_VISIBLE_DEVICES’] &#x3D; args.gpus</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">os.environ[<span class="hljs-string">&#x27;CUDA_VISIBLE_DEVICES&#x27;</span>] = args.gpus <br><span class="hljs-comment"># 这是一个环境变量，专门用于控制运行在NVIDIA GPU上的程序，告诉程序哪些GPU是可见的。</span><br><span class="hljs-comment"># 在深度学习或者其他需要使用GPU加速的场合，这个环境变量经常被用来指定使用哪些GPU。</span><br><br><span class="hljs-comment"># os.environ[&#x27;CUDA_VISIBLE_DEVICES&#x27;] = args.gpus: 这行代码将用户指定的GPU编号赋值给CUDA_VISIBLE_DEVICES环境变量。</span><br><span class="hljs-comment"># 这意味着只有编号在args.gpus中的GPU对程序是可见的。如果args.gpus设置为&#x27;0,1&#x27;，则只有编号为0和1的GPU会被程序使用。</span><br></code></pre></td></tr></table></figure>

<h2 id="wandb-login-api-key"><a href="#wandb-login-api-key" class="headerlink" title="wandb login api key"></a>wandb login api key</h2><p><a target="_blank" rel="noopener" href="https://github.com/wandb/wandb/issues/2878">wandb Github Issues</a></p>
<p>You can find your API key in your browser here: <a target="_blank" rel="noopener" href="https://wandb.ai/authorize">https://wandb.ai/authorize</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.wandb.ai/quickstart/">Wandb docs</a></p>
<p>(sr_benchmark) houjinliang@3090server2:~&#x2F;MyCVProject&#x2F;eSuperResolution&#x2F;exp_datasets$ wandb login<br>wandb: Currently logged in as: cosmicdustycn (cosmicdustycn-npu). Use <code>wandb login --relogin</code> to force relogin</p>
<h2 id="wandb-log"><a href="#wandb-log" class="headerlink" title="wandb log"></a>wandb log</h2><ul>
<li><p>install &amp; login</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">(sr_benchmark) houjinliang@3090server:~$ pip install wandb<br><span class="hljs-comment"># 输入https://wandb.ai/home的密钥</span><br>(sr_benchmark) houjinliang@3090server:~$ wandb login<br>wandb: Currently logged <span class="hljs-keyword">in</span> as: cosmicdustycn (cosmicdustycn-npu). Use `wandb login --relogin` to force relogin<br></code></pre></td></tr></table></figure></li>
<li><p>init</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">wandb.init(<br>    <span class="hljs-comment"># set the wandb project where this run will be logged</span><br>    project=<span class="hljs-string">&quot;your_project_name&quot;</span><br>    name=<span class="hljs-string">&quot;your_experiment_name&quot;</span><br><br>    <span class="hljs-comment"># track hyperparameters and run metadata</span><br>    config=&#123;<br>        <span class="hljs-string">&quot;learning_rate&quot;</span>: xx<br>        <span class="hljs-string">&quot;batch_size&quot;</span>: xx<br>        <span class="hljs-string">&quot;epochs&quot;</span>: xx<br>    &#125;<br>)<br></code></pre></td></tr></table></figure>
</li>
<li><p>log</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">wandb.log(&#123;<br>    <span class="hljs-string">&quot;epoch&quot;</span>:e,<br>    <span class="hljs-string">&quot;n_iter&quot;</span>:n_iter,<br>    <span class="hljs-string">&quot;train_loss&quot;</span> : train_loss,<br>    <span class="hljs-string">&quot;avg_epoch_loss&quot;</span>: epoch_loss,<br>    <span class="hljs-string">&quot;avg_validation_loss&quot;</span>: eval_loss,<br>    <span class="hljs-string">&quot;learning_rate&quot;</span>: lr<br>    &#125;)<br></code></pre></td></tr></table></figure></li>
</ul>
<h2 id="📌-TODO-wandb-sweep"><a href="#📌-TODO-wandb-sweep" class="headerlink" title="📌(TODO)wandb sweep"></a>📌(TODO)wandb sweep</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.wandb.ai/guides/sweeps/define-sweep-configuration">Sweep configuration structure|docs.wandb.ai</a></li>
<li></li>
</ul>
<h2 id="wandb-offline-and-sync"><a href="#wandb-offline-and-sync" class="headerlink" title="wandb offline and sync"></a>wandb offline and sync</h2><p>在main函数的wandb init中加入关于mode的两行代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">os.environ[<span class="hljs-string">&quot;WANDB_MODE&quot;</span>] = <span class="hljs-string">&quot;offline&quot;</span><br><br>wandb.init(<br>    <span class="hljs-comment"># set the wandb project where this run will be logged</span><br>    project=<span class="hljs-string">&quot;your_project_name&quot;</span><br>    name=<span class="hljs-string">&quot;your_experiment_name&quot;</span><br><br>    mode=<span class="hljs-string">&quot;offline&quot;</span>,<br><br>    <span class="hljs-comment"># track hyperparameters and run metadata</span><br>    config=&#123;<br>        <span class="hljs-string">&quot;learning_rate&quot;</span>: xx<br>        <span class="hljs-string">&quot;batch_size&quot;</span>: xx<br>        <span class="hljs-string">&quot;epochs&quot;</span>: xx<br>    &#125;<br>)<br></code></pre></td></tr></table></figure>
<p>在main代码文件跑完之后，会输出用什么命令来sync</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>You can <span class="hljs-built_in">sync</span> this run to the cloud by running:<br>wandb <span class="hljs-built_in">sync</span> /mnt/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/wandb/offline-run-20240917_164903-erkfg070<br>Find logs at: wandb/offline-run-20240917_164903-erkfg070/logs<br><br><br>wandb <span class="hljs-built_in">sync</span> /mnt/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/wandb/offline-run-20240917_145545-qfuofp0z<br><br><span class="hljs-comment"># Find logs at: /mnt/houjinliang/MyCVProject/eSuperResolution/SR_Benchmark/wandb/debug-cli.houjinliang.log</span><br><span class="hljs-comment"># Syncing: https://wandb.ai/cosmicdustycn-npu/SR_Benchmark/runs/qfuofp0z ... done.</span><br></code></pre></td></tr></table></figure>

<h2 id="torh-roll"><a href="#torh-roll" class="headerlink" title="torh.roll"></a>torh.roll</h2><p>torch.roll 是 PyTorch 提供的一个函数，用于对张量（tensor）进行滚动操作。具体来说，这个函数会将张量的元素沿着指定的维度（dimension）滚动一定数量的步幅。</p>
<p>以下是 torch.roll 的基本用法：<br><code>torch.roll(input, shifts, dims)</code></p>
<ul>
<li><code>input</code>：要滚动的张量。</li>
<li><code>shifts</code>：每个维度要滚动的步数。这个参数可以是单个整数，也可以是与 input 维度数目相同的元组，以指定每个维度滚动的步数。</li>
<li><code>dims</code>：一个包含要滚动维度的整数列表。如果这个参数被省略，则所有维度都会被滚动。</li>
</ul>
<p>函数的工作方式如下：</p>
<ol>
<li>对于 dims 中指定的每个维度，input 张量的元素会按照 shifts 指定的步数进行滚动。</li>
<li>正数表示元素向更高的索引方向滚动，而负数表示元素向更低的索引方向滚动。</li>
<li>滚动是在指定维度内进行的，不会影响其他维度。</li>
</ol>
<h2 id="多头注意力机制（Multi-Head-Attention）中，head-dim-dim-num-heads，不能整除怎么办"><a href="#多头注意力机制（Multi-Head-Attention）中，head-dim-dim-num-heads，不能整除怎么办" class="headerlink" title="多头注意力机制（Multi-Head Attention）中，head_dim &#x3D; dim &#x2F;&#x2F; num_heads，不能整除怎么办"></a>多头注意力机制（Multi-Head Attention）中，head_dim &#x3D; dim &#x2F;&#x2F; num_heads，不能整除怎么办</h2><p>在深度学习中，特别是在多头注意力机制（Multi-Head Attention）中，head_dim &#x3D; dim &#x2F;&#x2F; num_heads 这行代码用于计算每个注意力头的维度。这里的 dim 是总的特征维度，而 num_heads 是注意力头的数量。</p>
<p>如果 dim 不能被 num_heads 整除，直接使用整数除法（&#x2F;&#x2F;）会导致 head_dim 是一个整数，且不包含余数。这意味着，如果存在余数，那么总的维度将无法完全被注意力头均匀分配。</p>
<p>处理这种情况有几种方法：</p>
<ul>
<li>向上取整：将 dim 除以 num_heads 并向上取整，以确保每个头至少获得足够的维度。这可以通过使用 math.ceil 函数来实现。</li>
<li>向下取整并调整：首先使用整数除法计算 head_dim，然后将剩余的维度平均分配给前几个头。这需要一些额外的代码来处理。</li>
<li>直接舍去余数：忽略不能均匀分配的维度，只使用可以均匀分配的部分。</li>
</ul>
<p>选择哪种方法取决于你的具体需求和对性能的考虑。在某些情况下，小的余数可能不会对模型性能产生重大影响，因此可以直接舍去或均匀分配。在其他情况下，可能需要更精确的维度分配。</p>
<h2 id="view-permute-transpose"><a href="#view-permute-transpose" class="headerlink" title="view() &amp; permute() &amp; transpose()"></a>view() &amp; permute() &amp; transpose()</h2><p>在编程和数据处理中，view(), permute(), 和 transpose() 这三个函数常常用于数组的操作，尤其是在Python的NumPy库中。下面是它们各自的定义和区别：</p>
<ol>
<li>view()：</li>
</ol>
<ul>
<li>view() 函数返回一个新的数组对象，这个对象与原始数组共享相同的数据，但是具有不同的形状。这意味着，当你通过view()改变数组形状时，原始数组的数据不会被复制，而是通过不同的视角来查看同一块数据。</li>
<li>使用view()通常是为了节省内存，因为它不会进行数据的复制。</li>
<li>示例：如果有一个形状为(3, 4)的数组，使用.view()并指定新的形状为(4, 3)将不会改变底层数据的存储，但是会改变数组的形状。</li>
</ul>
<ol start="2">
<li>permute()：</li>
</ol>
<ul>
<li>permute() 函数通常用于重新排列数组的维度。在有些库（如PyTorch）中，permute()可以接受一个维度索引的排列，并根据这个排列来返回一个新的数组，其维度顺序被改变。</li>
<li>使用permute()时，原始数据同样不会被复制，仅仅是改变了维度的顺序。</li>
<li>示例：对于一个形状为(2, 3, 4)的数组，使用.permute(2, 0, 1)将返回一个形状为(4, 2, 3)的新数组。</li>
</ul>
<ol start="3">
<li>transpose()：</li>
</ol>
<ul>
<li>transpose() 函数用于交换数组的两个维度。在二维数组中，这通常意味着行和列的交换。在多维数组中，transpose()可以接受一个维度索引的元组，用于指定需要交换的维度。</li>
<li>与view()和permute()一样，transpose()也不会复制数据，它只是返回一个提供了不同视角的数组。</li>
<li>对于二维数组，transpose()默认交换第一个和第二个维度。对于更高维度的数组，需要指定维度索引。</li>
<li>示例：对于一个形状为(2, 3)的二维数组，使用.transpose()将返回一个形状为(3, 2)的新数组。对于一个形状为(2, 3, 4)的三维数组，使用.transpose(0, 2, 1)将返回一个形状为(2, 4, 3)的新数组。</li>
</ul>
<p>总结：</p>
<ul>
<li>view() 更改数组的形状而不改变数据的连续性。</li>
<li>permute() 重新排列数组的维度顺序。</li>
<li>transpose() 交换数组中的两个或多个维度。</li>
<li>在使用这些函数时，需要注意它们都不会改变原始数组的数据，只是提供了不同的访问方式。如果需要对数组进行深拷贝，应使用copy()函数。</li>
</ul>
<h2 id="relative-position-index-relative-position-bias-table-relative-position-bias"><a href="#relative-position-index-relative-position-bias-table-relative-position-bias" class="headerlink" title="relative_position_index &amp; relative_position_bias_table &amp; relative_position_bias"></a>relative_position_index &amp; relative_position_bias_table &amp; relative_position_bias</h2><h3 id="relative-position-index"><a href="#relative-position-index" class="headerlink" title="relative_position_index"></a>relative_position_index</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># get pair-wise relative position index for each token inside the window</span><br>coords_h = torch.arange(<span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">0</span>])<br>coords_w = torch.arange(<span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">1</span>])<br>coords = torch.stack(torch.meshgrid([coords_h, coords_w], indexing=<span class="hljs-string">&quot;ij&quot;</span>))  <span class="hljs-comment"># [2, Mh, Mw]</span><br>coords_flatten = torch.flatten(coords, <span class="hljs-number">1</span>)  <span class="hljs-comment"># [2, Mh*Mw]</span><br><br><span class="hljs-comment"># [2, Mh*Mw, 1] - [2, 1, Mh*Mw]</span><br>relative_coords = coords_flatten[:, :, <span class="hljs-literal">None</span>] - coords_flatten[:, <span class="hljs-literal">None</span>, :]  <span class="hljs-comment"># [2, Mh*Mw, Mh*Mw] （张量广播）</span><br><br>relative_coords = relative_coords.permute(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>).contiguous()  <span class="hljs-comment"># [Mh*Mw, Mh*Mw, 2]</span><br><br><span class="hljs-comment"># 二元位置索引 -&gt; 一元位置索引</span><br>relative_coords[:, :, <span class="hljs-number">0</span>] += <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>  <span class="hljs-comment"># shift to start from 0</span><br>relative_coords[:, :, <span class="hljs-number">1</span>] += <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">1</span>] - <span class="hljs-number">1</span><br>relative_coords[:, :, <span class="hljs-number">0</span>] *= <span class="hljs-number">2</span> * <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">1</span>] - <span class="hljs-number">1</span><br>relative_position_index = relative_coords.<span class="hljs-built_in">sum</span>(-<span class="hljs-number">1</span>)  <span class="hljs-comment"># [Mh*Mw, Mh*Mw] # 相对位置索引</span><br><br><span class="hljs-variable language_">self</span>.register_buffer(<span class="hljs-string">&quot;relative_position_index&quot;</span>, relative_position_index)<br><span class="hljs-comment"># 只要窗口的尺寸不变，relative_position_index就是不变的</span><br><span class="hljs-comment"># 在训练过程中，变化的是relative_position_bias_table</span><br></code></pre></td></tr></table></figure>

<p>在PyTorch框架中，self.register_buffer()是一个在模型中注册一个缓冲区（buffer）的方法，这个缓冲区不是模型参数，但是它会在模型的保存和加载过程中与模型参数一起被保存和加载。以下是对代码self.register_buffer(“relative_position_index”, relative_position_index)的解释：</p>
<ul>
<li>self: 这是模型的一个实例。在PyTorch中，模型的类通常继承自torch.nn.Module，self代表这个模型实例本身。</li>
<li>register_buffer(): 这是一个PyTorch模块的方法，用于注册一个缓冲区。缓冲区与模型参数（通过nn.Parameter定义）不同，它们在模型的前向传播中不会进行梯度计算（即不会被更新），但是它们可以随模型一起保存和加载。</li>
<li>“relative_position_index”: 这是一个字符串，用于给注册的缓冲区命名。这个名字可以用来在模型内部访问这个缓冲区。</li>
<li>relative_position_index: 这是一个张量（tensor），是你想要注册为缓冲区的数据。在调用register_buffer()之后，你可以通过self.relative_position_index来访问这个缓冲区。</li>
</ul>
<p>具体到这段代码的上下文，relative_position_index可能是用于在模型中编码相对位置信息的索引。例如，在Transformer模型中，相对位置编码是一个重要的概念，它帮助模型理解序列中元素之间的相对位置关系。</p>
<p>使用register_buffer()的好处是，当你保存和加载模型时，这个相对位置索引不需要在模型的state_dict之外单独处理，它会自动被包括在模型的保存和加载过程中。</p>
<p>总结来说，这段代码的作用是在模型中注册一个名为relative_position_index的缓冲区，该缓冲区包含了模型在处理序列数据时需要用到的相对位置索引信息。这样做可以确保这个索引信息在模型的训练和推理过程中保持一致，并且在模型保存和加载时被正确处理。</p>
<h3 id="relative-position-bias-table"><a href="#relative-position-bias-table" class="headerlink" title="relative_position_bias_table"></a>relative_position_bias_table</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-variable language_">self</span>.relative_position_bias_table = nn.Parameter(torch.zeros((<span class="hljs-number">2</span> * window_size[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>) * (<span class="hljs-number">2</span> * window_size[<span class="hljs-number">1</span>] - <span class="hljs-number">1</span>), num_heads))  <span class="hljs-comment"># [2*Mh-1 * 2*Mw-1, nH]</span><br>nn.init.trunc_normal_(<span class="hljs-variable language_">self</span>.relative_position_bias_table, std=<span class="hljs-number">.02</span>)    <span class="hljs-comment"># 相对位置偏移表格 初始化</span><br></code></pre></td></tr></table></figure>

<h3 id="relative-position-bias"><a href="#relative-position-bias" class="headerlink" title="relative_position_bias"></a>relative_position_bias</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">relative_position_bias = <span class="hljs-variable language_">self</span>.relative_position_bias_table[<span class="hljs-variable language_">self</span>.relative_position_index.view(-<span class="hljs-number">1</span>)].view(<span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">0</span>] * <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">1</span>], <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">0</span>] * <span class="hljs-variable language_">self</span>.window_size[<span class="hljs-number">1</span>], -<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>

<h2 id="Python-Package镜像网站（备用）"><a href="#Python-Package镜像网站（备用）" class="headerlink" title="Python Package镜像网站（备用）"></a>Python Package镜像网站（备用）</h2><h3 id="PyTorch"><a href="#PyTorch" class="headerlink" title="PyTorch"></a>PyTorch</h3><ul>
<li><p>斯坦福 Nelson Liu ：<a target="_blank" rel="noopener" href="https://cs.stanford.edu/~nfliu/files/pytorch/whl/torch_stable.html">pytorch-manylinux-binaries (stanford.edu)</a></p>
</li>
<li><p>⭐PyPI：<a target="_blank" rel="noopener" href="https://pypi.org/project/torch/1.3.1/#files">torch · PyPI</a></p>
</li>
<li><p>PyTorch：<a target="_blank" rel="noopener" href="https://pytorch.org/get-started/previous-versions/">Previous PyTorch Versions | PyTorch</a></p>
</li>
<li><p>⭐清华镜像：<a target="_blank" rel="noopener" href="https://download.pytorch.org/whl/torch_stable.html">download.pytorch.org&#x2F;whl&#x2F;torch_stable.html</a></p>
</li>
<li><p>阿里云镜像：<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/pytorch-wheels/cu113/">pytorch-wheels-cu113安装包下载_开源镜像站-阿里云 (aliyun.com)</a></p>
</li>
</ul>
<h3 id="CUDA"><a href="#CUDA" class="headerlink" title="CUDA"></a>CUDA</h3><ul>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/r/nvidia/cuda">hub.docker.com</a></li>
<li><a target="_blank" rel="noopener" href="https://docker.aityp.com/r/docker.io/nvidia/cuda">docker.aityp.com</a></li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%9F%A5%E8%AF%86%E7%A7%AF%E7%B4%AF/" class="category-chain-item">知识积累</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python/" class="print-no-link">#Python</a>
      
        <a href="/tags/DeepLearning/" class="print-no-link">#DeepLearning</a>
      
        <a href="/tags/PyTorch/" class="print-no-link">#PyTorch</a>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
        <a href="/tags/Git/" class="print-no-link">#Git</a>
      
        <a href="/tags/Github/" class="print-no-link">#Github</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>小知识</div>
      <div>https://blog.cosmicdusty.cc/post/Knowledge/ResearchTips/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Murphy</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年6月1日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/post/MyLife/MayThink/" title="五月沉思">
                        <span class="hidden-mobile">五月沉思</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"JijHNKemeVNog4wF7g9I5TR3-gzGzoHsz","appKey":"FvsKdxHOP2aG5rHrHby5aV0b","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a rel="nofollow noopener"><span>Powered by</span></a> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span><b>Hexo</b></span></a> <i class="iconfont icon-love"></i> <a rel="nofollow noopener"><span>Themed by</span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span><b>Fluid</b></span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量
        <span id="busuanzi_value_site_pv"></span>
        次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数
        <span id="busuanzi_value_site_uv"></span>
        人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
